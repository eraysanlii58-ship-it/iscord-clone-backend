{"ast":null,"code":"import React,{useEffect,useState}from'react';import axios from'axios';import{io}from'socket.io-client';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const API_BASE='https://iscord-clone-backend-two.vercel.app';const SOCKET_URL='https://iscord-clone-backend-two.vercel.app';// Vercel'de backend URL'si\nfunction App(){const[channels,setChannels]=useState([]);const[messages,setMessages]=useState([]);const[selectedChannel,setSelectedChannel]=useState(null);const[newMessage,setNewMessage]=useState('');const[onlineCount,setOnlineCount]=useState(0);useEffect(()=>{const socket=io(SOCKET_URL);socket.on('onlineUsers',count=>{setOnlineCount(count);});return()=>{socket.disconnect();};},[]);useEffect(()=>{axios.get(\"\".concat(API_BASE,\"/api/channels\")).then(res=>setChannels(res.data));},[]);useEffect(()=>{let interval;if(selectedChannel){// İlk yüklemede hemen çek\naxios.get(\"\".concat(API_BASE,\"/api/messages/\").concat(selectedChannel.id)).then(res=>setMessages(res.data));// Sonra her 2 saniyede bir çek\ninterval=setInterval(()=>{axios.get(\"\".concat(API_BASE,\"/api/messages/\").concat(selectedChannel.id)).then(res=>setMessages(res.data));},2000);}return()=>{if(interval)clearInterval(interval);};},[selectedChannel]);const sendMessage=()=>{if(!newMessage||!selectedChannel)return;axios.post(\"\".concat(API_BASE,\"/api/messages\"),{channelId:selectedChannel.id,userId:1,// Demo kullanıcı\ntext:newMessage}).then(res=>{setMessages([...messages,res.data]);setNewMessage('');});};return/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',height:'100vh',fontFamily:'Arial'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{width:200,background:'#23272a',color:'#fff',padding:16},children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Kanallar\"}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:12,fontSize:14,color:'#43b581'},children:[\"\\xC7evrim i\\xE7i: \",onlineCount]}),channels.map(ch=>/*#__PURE__*/_jsxs(\"div\",{style:{margin:'8px 0',cursor:'pointer',fontWeight:(selectedChannel===null||selectedChannel===void 0?void 0:selectedChannel.id)===ch.id?'bold':'normal'},onClick:()=>setSelectedChannel(ch),children:[\"#\",ch.name]},ch.id))]}),/*#__PURE__*/_jsxs(\"div\",{style:{flex:1,background:'#36393f',color:'#fff',display:'flex',flexDirection:'column'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{flex:1,overflowY:'auto',padding:16},children:[/*#__PURE__*/_jsx(\"h3\",{children:selectedChannel?\"#\".concat(selectedChannel.name):'Bir kanal seçin'}),messages.map(msg=>/*#__PURE__*/_jsxs(\"div\",{style:{margin:'8px 0'},children:[/*#__PURE__*/_jsxs(\"b\",{children:[\"Kullan\\u0131c\\u0131 \",msg.userId,\":\"]}),\" \",msg.text]},msg.id))]}),selectedChannel&&/*#__PURE__*/_jsxs(\"div\",{style:{padding:16,borderTop:'1px solid #222',display:'flex'},children:[/*#__PURE__*/_jsx(\"input\",{value:newMessage,onChange:e=>setNewMessage(e.target.value),style:{flex:1,marginRight:8,padding:8,borderRadius:4,border:'none'},placeholder:\"Mesaj yaz...\"}),/*#__PURE__*/_jsx(\"button\",{onClick:sendMessage,style:{padding:'8px 16px',borderRadius:4,background:'#7289da',color:'#fff',border:'none'},children:\"G\\xF6nder\"})]})]})]});}export default App;","map":{"version":3,"names":["React","useEffect","useState","axios","io","jsx","_jsx","jsxs","_jsxs","API_BASE","SOCKET_URL","App","channels","setChannels","messages","setMessages","selectedChannel","setSelectedChannel","newMessage","setNewMessage","onlineCount","setOnlineCount","socket","on","count","disconnect","get","concat","then","res","data","interval","id","setInterval","clearInterval","sendMessage","post","channelId","userId","text","style","display","height","fontFamily","children","width","background","color","padding","marginBottom","fontSize","map","ch","margin","cursor","fontWeight","onClick","name","flex","flexDirection","overflowY","msg","borderTop","value","onChange","e","target","marginRight","borderRadius","border","placeholder"],"sources":["C:/Users/erays/OneDrive/Masaüstü/site/frontend/src/App.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\nimport { io } from 'socket.io-client';\r\n\r\nconst API_BASE = 'https://iscord-clone-backend-two.vercel.app';\r\nconst SOCKET_URL = 'https://iscord-clone-backend-two.vercel.app'; // Vercel'de backend URL'si\r\n\r\nfunction App() {\r\n  const [channels, setChannels] = useState([]);\r\n  const [messages, setMessages] = useState([]);\r\n  const [selectedChannel, setSelectedChannel] = useState(null);\r\n  const [newMessage, setNewMessage] = useState('');\r\n  const [onlineCount, setOnlineCount] = useState(0);\r\n\r\n  useEffect(() => {\r\n    const socket = io(SOCKET_URL);\r\n    socket.on('onlineUsers', (count) => {\r\n      setOnlineCount(count);\r\n    });\r\n    return () => {\r\n      socket.disconnect();\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    axios.get(`${API_BASE}/api/channels`).then(res => setChannels(res.data));\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    let interval;\r\n    if (selectedChannel) {\r\n      // İlk yüklemede hemen çek\r\n      axios.get(`${API_BASE}/api/messages/${selectedChannel.id}`).then(res => setMessages(res.data));\r\n      // Sonra her 2 saniyede bir çek\r\n      interval = setInterval(() => {\r\n        axios.get(`${API_BASE}/api/messages/${selectedChannel.id}`).then(res => setMessages(res.data));\r\n      }, 2000);\r\n    }\r\n    return () => {\r\n      if (interval) clearInterval(interval);\r\n    };\r\n  }, [selectedChannel]);\r\n\r\n  const sendMessage = () => {\r\n    if (!newMessage || !selectedChannel) return;\r\n    axios.post(`${API_BASE}/api/messages`, {\r\n      channelId: selectedChannel.id,\r\n      userId: 1, // Demo kullanıcı\r\n      text: newMessage\r\n    }).then(res => {\r\n      setMessages([...messages, res.data]);\r\n      setNewMessage('');\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div style={{ display: 'flex', height: '100vh', fontFamily: 'Arial' }}>\r\n      <div style={{ width: 200, background: '#23272a', color: '#fff', padding: 16 }}>\r\n        <h3>Kanallar</h3>\r\n        <div style={{ marginBottom: 12, fontSize: 14, color: '#43b581' }}>\r\n          Çevrim içi: {onlineCount}\r\n        </div>\r\n        {channels.map(ch => (\r\n          <div key={ch.id} style={{ margin: '8px 0', cursor: 'pointer', fontWeight: selectedChannel?.id === ch.id ? 'bold' : 'normal' }} onClick={() => setSelectedChannel(ch)}>\r\n            #{ch.name}\r\n          </div>\r\n        ))}\r\n      </div>\r\n      <div style={{ flex: 1, background: '#36393f', color: '#fff', display: 'flex', flexDirection: 'column' }}>\r\n        <div style={{ flex: 1, overflowY: 'auto', padding: 16 }}>\r\n          <h3>{selectedChannel ? `#${selectedChannel.name}` : 'Bir kanal seçin'}</h3>\r\n          {messages.map(msg => (\r\n            <div key={msg.id} style={{ margin: '8px 0' }}>\r\n              <b>Kullanıcı {msg.userId}:</b> {msg.text}\r\n            </div>\r\n          ))}\r\n        </div>\r\n        {selectedChannel && (\r\n          <div style={{ padding: 16, borderTop: '1px solid #222', display: 'flex' }}>\r\n            <input value={newMessage} onChange={e => setNewMessage(e.target.value)} style={{ flex: 1, marginRight: 8, padding: 8, borderRadius: 4, border: 'none' }} placeholder=\"Mesaj yaz...\" />\r\n            <button onClick={sendMessage} style={{ padding: '8px 16px', borderRadius: 4, background: '#7289da', color: '#fff', border: 'none' }}>Gönder</button>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}